entityDef melee_mutilatedhuman_swipe {
	"inherit"				"melee_generic"
	//"mtr_blob"				"textures/damage/bloodBite"
	"blob_time"				"750"
	"blob_y"				"240"	//640 by 480 pixels
	"blob_devx"				"100"
	"blob_devy"				"100"
	"blob_directional"		"1"
	
	"damage"				"10"
	
	"kickDir"				"0 1 0"
	"kick_time"				"550"
	"kick_amplitude"		"10"
	"knockback"				"0"
	
	"mb_time"				"350"
	"mb_amplitude"			"1.7"
	"snd_hit"				"monster_mutilated_male_hit"
}

entityDef monster_mutilated_male {
	"inherit"				"monster_simple_default"
	"editor_color"			"1 .5 0"
	"editor_mins"			"-24 -24 0"
	"editor_maxs"			"24 24 90"
	"spawnClass"			"hhMutilatedHuman"
	"scriptobject"			"monster_mutilated_human"
	"head_joint"			"neck"
	"use_aas"				"aas48"
	"size"					"32 32 80"
	"turn_rate"				"360"
	"melee_range"			"32"
	"has_melee_attack"		"1"
	"team"					"7"
	"health"				"150"
	"gibhealth"				"-150"
	"ignore_obstacles"		"1"		//needed to allow attacking actors that block this monster
	"dda_attack_min"		"0.5"
	"dda_attack_max"		"2.0"
	"ddaIndex"				"5"
	"head_look"						"1"
	"look_joint b1"					"0.25 0.25 0"
	"look_joint b2"					"0.25 0.25 0"
	"look_joint b3"					"0.5 0.5 0"
	"look_min"						"-110 -110 0"
	"look_max"						"110 110 0"
	"head_focus_rate"				"0.15"
	"kick_damage"			"melee_mutilatedhuman_swipe"

	// Dismemberment stuff
	"debris_head_velocity"	"-100 0 150"
	"bone_head"				"neck"
	"debris_chest_velocity"	"0 -80 20"
	"bone_chest"			"b2"
	"debris_arm_velocity"	"-30 0 150"
	"bone_arm_left"			"Lelbow"
	"bone_arm_right"		"Relbow"
	"damage_zone head"		"*b3"
	"damage_zone chest"		"*waist -*b3"
	"damage_zone left_arm"	"*Lelbow"
	"damage_zone right_arm"	"*Rshldr"
	"damage_scale head"		"2"
	"head_falloff_damage"	"70"

	"chanceLimbsWillFallOff"	"0.25" // Chance that damage to a limb will cause it to fall off
	"fx_left_arm_blood"		"fx/mutilatedhuman_left_arm_blood.fx"
	"fx_right_arm_blood"	"fx/mutilatedhuman_right_arm_blood.fx"
	"fx_chest_blood"		"fx/mutilatedhuman_chest_blood.fx"
	"fx_head_blood"			"fx/mutilatedhuman_head_blood.fx"
	"pain_delay"			"0.7"

	// Caching
	"model"					"model_monster_mutilated_human"
	"ragdoll"				"monster_mutilatedhuman"
	"model_head"			"head_mutilatedhuman"
	"def_dropsSoul"			"ammo_lifeforce_small"
	"def_gibDebrisSpawner"	"debrisSpawner_mutilated_male"
	"def_debris_head"		"debris_mutilated_head"
	"def_debris_chest"		"debris_mutilated_rightside"
	"def_debris_arm"		"debris_mutilated_righthand"
	"damage_skin"			"skins/monsters/mutilated_male_damage_"
	"skin_freeze"			"skins/monsters/mutilated_frozen.skin"
	"skin_acidburn"			"skins/monsters/mutilated_acid"
	"skin"					"skins/monsters/mutilated"

	"acidburn"				"1"
	"can_freeze"			"1"

	// Damage scaling - mutilated humans are suseptible to damage from pods
	"splash_podexplosion"	"5"

	// Sounds
	"snd_sight"				"monster_mutilated_male_sight"
	"snd_pain_small"		"monster_mutilated_male_pain"
	"snd_pain_medium"		"monster_mutilated_male_pain"
	"snd_pain_large"		"monster_mutilated_male_pain"
	"snd_pain_huge"			"monster_mutilated_male_pain"
	"snd_meleeattack"		"monster_mutilated_male_meleeattack"
	"snd_death"				"monster_mutilated_male_die"
	"snd_footstep_metal"	"monster_mutilated_male_footstep_metal"
	"snd_chatter"			"monster_mutilated_male_chatter"

	// IK Stuff
	"ik_numLegs"						"2"
	"ik_tiltWaist"						"1" // HUMANHEAD mdl:  This flag isn't used by Doom3 and doesn't appear to be used by the code either.
	"ik_usePivot"						"0" // HUMANHEAD mdl:  This flag isn't used by Doom3 and the associated code appears to be broken.  Leave it disabled.
	"ik_footSize"						"4"
	"ik_minWaistAnkleDist"				"20"
	"ik_minWaistFloorDist"				"20"
	"ik_waist"							"waist"		// doom has this different than bone_waist (probably starting point of ik tranversal)
	"ik_hip1"							"Lupleg"
	"ik_hip2"							"Rupleg"
	"ik_knee1"							"Lknee"
	"ik_knee2"							"Rknee"
	"ik_ankle1"							"Lankle"
	"ik_ankle2"							"Rankle"
	"ik_dir1"							"Lvector"		// IK direction is defined as the vector from ik_dir to ik_knee
	"ik_dir2"							"Rvector"		// IK direction is used to tell which way to bend (should be straight out in front of knee)
	"ik_foot1"							"Ltoe_r"
	"ik_foot2"							"Rtoe_r"
}

/////////////////////////////////////////////////////////////////////////////////////
//
// MUTILATED HUMAN
//
/////////////////////////////////////////////////////////////////////////////////////
export all {
	options		-scale 1 -prefix skel_ -keep Waist waistLook Rattach_gun Lattach_gun

	addoptions -keepmesh mutilated_dome
	addoptions -keepmesh mutilated_guts_right
	addoptions -keepmesh mutilated_rightside
	addoptions -keepmesh mutilated_leftside
	addoptions -keepmesh mutilated_guts_left
	addoptions -keepmesh mutilated_twosided
	addoptions -keepmesh blood_stump
	addoptions -keepmesh mutilated_body
	addoptions -keepmesh mutilated_rightarm
	addoptions -keepmesh mutilated_leftarm
	addoptions -keepmesh mutilated_head_neck


	mesh		models/characters/humans/humans.ma -destdir models/monsters/mutilated_human -dest mutilated_human
	
	addoptions	-destdir models/monsters/mutilated_human/anim
	anim		models/characters/humans/anim/mh_idle.ma
	anim		models/characters/humans/anim/mh_idleb.ma
	anim		models/characters/humans/anim/mh_combat_backup.ma
	anim		models/characters/humans/anim/mh_combat_idle.ma
	anim		models/characters/humans/anim/mh_combat_meleeattacka.ma
	anim		models/characters/humans/anim/mh_combat_meleeattackb.ma
	anim		models/characters/humans/anim/mh_combat_meleeattackc.ma
	anim		models/characters/humans/anim/mh_combat_strafeleft.ma
	anim		models/characters/humans/anim/mh_combat_straferight.ma
	anim		models/characters/humans/anim/mh_combat_walk.ma
	anim		models/characters/humans/anim/mh_combat_walk1.ma
	anim		models/characters/humans/anim/mh_work_backup.ma
	anim		models/characters/humans/anim/mh_work_idle.ma
	anim		models/characters/humans/anim/mh_work_pickup.ma
	anim		models/characters/humans/anim/mh_work_putdown.ma
	anim		models/characters/humans/anim/mh_work_react.ma
	anim		models/characters/humans/anim/mh_work_strafeleft.ma
	anim		models/characters/humans/anim/mh_work_straferight.ma
	anim		models/characters/humans/anim/mh_work_walk.ma
	anim		models/characters/humans/anim/all_initial.ma
	anim		models/characters/humans/anim/mh_walk.ma
	anim		models/characters/humans/anim/mh_work_reacta.ma
	anim		models/characters/humans/anim/mh_work_reactb.ma
	anim		models/characters/humans/anim/mh_work_reactc.ma
	anim		models/characters/humans/anim/mh_worka.ma
	anim		models/characters/humans/anim/mh_workb.ma
	anim		models/characters/humans/anim/mh_workc.ma
	anim		models/characters/humans/anim/mh_workd.ma
	anim		models/characters/humans/anim/mh_pain_left.ma
	anim		models/characters/humans/anim/mh_pain_right.ma
	anim		models/characters/humans/anim/mh_dragging.ma
	anim		models/characters/humans/anim/mh_tbeam.ma

}

model model_monster_mutilated_human {
    mesh                 models/monsters/mutilated_human/mutilated_human.md5mesh
	channel torso		(*b1)
	channel legs		(*origin -*b1)
	
// Anims
	anim af_pose			  models/monsters/mutilated_human/anim/all_initial.md5anim
	anim ik_pose			  models/monsters/mutilated_human/anim/all_initial.md5anim
	anim dragging			  models/monsters/mutilated_human/anim/mh_dragging.md5anim
	anim backup               models/monsters/mutilated_human/anim/mh_combat_backup.md5anim{
		frame 1				sound	snd_pain_huge
		frame 3				sound	snd_footstep_metal
		frame 9				sound	snd_footstep_metal
		frame 14			sound	snd_footstep_metal
		frame 23			sound	snd_footstep_metal
	}
	anim shuttle_bound		models/monsters/mutilated_human/anim/mh_tbeam.md5anim
	anim idle		          models/monsters/mutilated_human/anim/mh_idle.md5anim	{
		frame 1				sound snd_chatter
	}
	anim idleb				models/monsters/mutilated_human/anim/mh_idleb.md5anim
	anim combat_idle		models/monsters/mutilated_human/anim/mh_combat_idle.md5anim
	anim meleeattack1		models/monsters/mutilated_human/anim/mh_combat_meleeattacka.md5anim {
		frame 12			sound snd_meleeattack
		frame 16			melee melee_mutilatedhuman_swipe
	}
	anim meleeattack2		models/monsters/mutilated_human/anim/mh_combat_meleeattackb.md5anim {
		frame 7				sound snd_meleeattack
		frame 9				melee melee_mutilatedhuman_swipe
		frame 19			sound snd_meleeattack
		frame 22			melee melee_mutilatedhuman_swipe
	}
	anim meleeattack3		models/monsters/mutilated_human/anim/mh_combat_meleeattackc.md5anim {
		frame 11			sound snd_meleeattack
		frame 13			melee melee_mutilatedhuman_swipe
		frame 24			sound snd_meleeattack
		frame 26			melee melee_mutilatedhuman_swipe
	}
	anim strafeleft           models/monsters/mutilated_human/anim/mh_combat_strafeleft.md5anim {
		frame 1				sound	snd_footstep_metal
		frame 8				sound	snd_footstep_metal
	}
	
	anim straferight          models/monsters/mutilated_human/anim/mh_combat_straferight.md5anim {
		frame 6				sound	snd_footstep_metal
		frame 14			sound	snd_footstep_metal
	}
	
	anim walk1                models/monsters/mutilated_human/anim/mh_combat_walk.md5anim {
	
		frame 1				sound 	snd_footstep_metal
		frame 8				sound	snd_footstep_metal
	}
	
	anim walk2                models/monsters/mutilated_human/anim/mh_combat_walk1.md5anim {
		frame 8				sound 	snd_footstep_metal
		frame 17			sound	snd_footstep_metal
	}
	
	anim walknocan            models/monsters/mutilated_human/anim/mh_walk.md5anim {
		frame 9				sound	snd_footstep_metal
		frame 25			sound	snd_footstep_metal
		frame 50			sound	snd_footstep_metal
		frame 60			sound	snd_footstep_metal
		frame 86			sound	snd_footstep_metal
		frame 98			sound	snd_footstep_metal
	}
	
	anim work_backup          models/monsters/mutilated_human/anim/mh_work_backup.md5anim	{
		frame 1				sound 	snd_chatter
		frame 18			sound	snd_footstep_metal
		frame 30			sound	snd_footstep_metal
		frame 47			sound	snd_footstep_metal
		frame 75			sound	snd_footstep_metal
		frame 86			sound	snd_footstep_metal
		frame 94			sound	snd_footstep_metal
		frame 137			sound	snd_footstep_metal
		frame 151			sound	snd_footstep_metal
		frame 166			sound	snd_footstep_metal
		frame 186			sound	snd_footstep_metal
		frame 200			sound	snd_footstep_metal
	}
	
	anim work_idle            models/monsters/mutilated_human/anim/mh_work_idle.md5anim	{
	
		frame 1				sound snd_chatter
		
	}
	anim work_pickup_ftbcan1		models/monsters/mutilated_human/anim/mh_work_pickup.md5anim {
		frame 1						call map_feedingtowerb::Worker1Can1Slide
		frame 80					trigger ftbWorkerCan1Pickup
	}
	anim work_pickup_ftbcan2		models/monsters/mutilated_human/anim/mh_work_pickup.md5anim {
		frame 80					trigger ftbWorkerCan2Pickup
	}
	anim work_pickup_ftbcan3		models/monsters/mutilated_human/anim/mh_work_pickup.md5anim {
		frame 80					trigger ftbWorkerCan3Pickup
	}
	anim work_pickup_ftbcan4		models/monsters/mutilated_human/anim/mh_work_pickup.md5anim {
		frame 80					trigger ftbWorkerCan4Pickup
	}
	anim work_pickup_ftbcan3_ftc	models/monsters/mutilated_human/anim/mh_work_pickup.md5anim {
		frame 1						call map_feedingtowerc::WorkerSlide
		frame 80					trigger ftbWorkerCan3Pickup
	}
	anim work_pickup_ftbcan3_ftd	models/monsters/mutilated_human/anim/mh_work_pickup.md5anim {
		frame 1						call map_feedingtowerc::WorkerSlide
		frame 80					trigger ftbWorkerCan3Pickup
	}
	anim work_putdown_ftbpos1       models/monsters/mutilated_human/anim/mh_work_putdown.md5anim {
		frame 108					trigger ftbWorkerCanDump1
	}
	anim work_putdown_ftbpos2       models/monsters/mutilated_human/anim/mh_work_putdown.md5anim {
		frame 108					trigger ftbWorkerCanDump2
	}
	anim work_putdown_ftbpos3       models/monsters/mutilated_human/anim/mh_work_putdown.md5anim {
		frame 108					trigger ftbWorkerCanDump3
	}
	anim work_strafeleft      models/monsters/mutilated_human/anim/mh_work_strafeleft.md5anim {
		frame 1				sound	snd_footstep_metal
		frame 23			sound	snd_footstep_metal
		frame 40			sound	snd_footstep_metal
		frame 53			sound	snd_footstep_metal
		frame 67			sound	snd_footstep_metal
		frame 113			sound	snd_footstep_metal
		frame 124			sound	snd_footstep_metal
	}
	
	anim work_straferight     models/monsters/mutilated_human/anim/mh_work_straferight.md5anim {
		frame 1				sound	snd_footstep_metal
		frame 10			sound	snd_footstep_metal
		frame 25			sound	snd_footstep_metal
		frame 50			sound	snd_footstep_metal
		frame 62			sound	snd_footstep_metal
		frame 71			sound	snd_footstep_metal
		frame 92			sound	snd_footstep_metal
		frame 101			sound	snd_footstep_metal
		frame 131			sound	snd_footstep_metal
		frame 138			sound	snd_footstep_metal
		frame 147			sound	snd_footstep_metal
		frame 170			sound	snd_footstep_metal
	}
	
	anim work_walk            models/monsters/mutilated_human/anim/mh_work_walk.md5anim {
		frame 6				sound	snd_footstep_metal
		frame 8				sound	snd_footstep_metal
		frame 31			sound	snd_footstep_metal
		frame 58			sound	snd_footstep_metal
		frame 71			sound	snd_footstep_metal
		frame 92			sound	snd_footstep_metal
		frame 113			sound	snd_footstep_metal
		frame 136			sound	snd_footstep_metal
		frame 152			sound	snd_footstep_metal
		frame 183			sound	snd_footstep_metal
		frame 199			sound	snd_footstep_metal
	}	
	
	anim work_reacta          models/monsters/mutilated_human/anim/mh_work_reacta.md5anim {
		frame 8				sound	snd_footstep_metal
		frame 22			sound	snd_footstep_metal
	}
	
	anim work_reactb          models/monsters/mutilated_human/anim/mh_work_reactb.md5anim {
		frame 22			sound	snd_footstep_metal
		frame 25			sound	snd_footstep_metal
	
	}
	
	anim work_reactc          models/monsters/mutilated_human/anim/mh_work_reactc.md5anim {
		frame 5				sound	snd_footstep_metal
		frame 62			sound	snd_footstep_metal
	}
	
	anim worka		          models/monsters/mutilated_human/anim/mh_worka.md5anim
	anim workb		          models/monsters/mutilated_human/anim/mh_workb.md5anim
	anim workc		          models/monsters/mutilated_human/anim/mh_workc.md5anim
	anim workd		          models/monsters/mutilated_human/anim/mh_workd.md5anim

	anim pain1		      models/monsters/mutilated_human/anim/mh_pain_left.md5anim
	anim pain2			  models/monsters/mutilated_human/anim/mh_pain_right.md5anim
}
